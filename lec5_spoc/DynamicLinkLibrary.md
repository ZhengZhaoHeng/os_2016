# 动态链接库
------
## 概述
以Windows为例，所谓动态链接，就是把一些经常会共用的代码（静态链接的OBJ程序库）制作成DLL档，当可执行文件调用到DLL档内的函数时，Windows操作系统才会把DLL档加载内存内，DLL档本身的结构就是可执行文件，当程序需求函数才进行链接。同时，在Linux和Unix操作系统中，也存在的同样的动态链接机制，比如Linux中的.so文件。通过动态链接方式，内存浪费的情形将可大幅降低。而静态链接库则是直接链接到可执行文件。

-------------
## 具体工作原理及其优点

动态链接库的使用，与运行时的地址生成是分不开的。具体来说，在不同的操作系统中，都存在着一些动态链接库，里面存放着一些已经编译好的经常被复用的代码，当应用程序需要这些函数时，操作系统就会将它加载到内存中，并通过运行时的地址生成将pc跳转到对应的函数入口，完成动态链接，这是编译时生成和加载时生成无法做到的。因此，将一些常用的函数存放到同一个动态链接库文件中，就避免了在不同的程序段中都保存一些重复的指令，很大程度上减少了对磁盘空间的消耗。

此外，当动态链接库被加载到内存中时，它只会被加载一次。也就是说，虽然每个进程都有自己的虚拟地址空间，但是他们所指向的动态链接库所在的内存块实际上是被共享的。在段页式转换中，会有对应的共享内存的段描述符来完成上述功能。因此，动态链接库的存在也避免了重复的指令被加载到内存中，也减少了进程对内存的消耗。



